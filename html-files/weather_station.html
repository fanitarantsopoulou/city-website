<!DOCTYPE html>
<html lang="el">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Florina Weather Station ğŸ“Ÿ</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        :root {
            --terminal-green: #00ff00;
            --terminal-bg: #0a0a0a;
        }

        body {
            background-color: var(--terminal-bg);
            color: var(--terminal-green);
            font-family: 'Press Start 2P', cursive;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            overflow: hidden;
        }

        /* Scanline Effect */
        body::before {
            content: " ";
            position: fixed;
            top: 0; left: 0; bottom: 0; right: 0;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.1) 50%);
            background-size: 100% 4px;
            z-index: 100;
            pointer-events: none;
        }

        .monitor {
            width: 90%;
            max-width: 700px;
            border: 10px solid #333;
            border-radius: 20px;
            padding: 30px;
            background: #0f1a0f;
            box-shadow: inset 0 0 50px #000, 0 0 20px var(--terminal-green);
            position: relative;
        }

        .header-box {
            border-bottom: 2px solid var(--terminal-green);
            padding-bottom: 15px;
            margin-bottom: 20px;
            font-size: 0.8rem;
        }

        .data-row {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
            font-size: 0.7rem;
        }

        .big-temp {
            font-size: 4rem;
            text-align: center;
            margin: 30px 0;
            text-shadow: 0 0 10px var(--terminal-green);
        }

        .progress-container {
            border: 2px solid var(--terminal-green);
            height: 25px;
            width: 100%;
            margin-top: 10px;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            width: 0%; /* ÎÎµÎºÎ¹Î½Î¬ÎµÎ¹ Î±Ï€ÏŒ Ï„Î¿ 0 ÎºÎ±Î¹ Ï„Î¿ ÎµÎ»Î­Î³Ï‡ÎµÎ¹ Î· JS */
            background: var(--terminal-green);
            animation: flicker 0.1s infinite;
            transition: width 1s ease-in-out;
        }

        @keyframes flicker {
            0%, 100% { opacity: 0.9; }
            50% { opacity: 1; }
        }

        .glitch-text { animation: glitch 2s infinite; }

        @keyframes glitch {
            0% { transform: translate(0); }
            2% { transform: translate(-2px, 2px); }
            4% { transform: translate(2px, -2px); }
            6% { transform: translate(0); }
        }

        .btn-return {
            margin-top: 40px;
            color: var(--terminal-green);
            border: 3px solid var(--terminal-green);
            padding: 15px 25px;
            text-decoration: none;
            font-size: 0.8rem;
            transition: all 0.2s;
            z-index: 101;
        }

        .btn-return:hover {
            background: var(--terminal-green);
            color: #000;
            box-shadow: 0 0 20px var(--terminal-green);
        }

        .blink { animation: blinker 1s linear infinite; }
        @keyframes blinker { 50% { opacity: 0; } }
    </style>
</head>

<body>

    <div class="monitor">
        <div class="header-box">
            > FLORINA_WEATHER_STATION_V.2.6<br>
            > STATUS: <span class="blink" id="system-status">SCANNING...</span>
        </div>

        <div class="data-row">
            <span>LOCATION:</span>
            <span>40.78Â°N / 21.41Â°E</span>
        </div>

        <div class="big-temp" id="temp">...</div>

        <div class="data-row">
            <span>CONDITION:</span>
            <span id="condition">---</span>
        </div>

        <div class="data-row" style="margin-top: 30px;">
            <span>FROST_LEVEL:</span>
            <span id="frost-val">0%</span>
        </div>
        <div class="progress-container">
            <div class="progress-fill" id="frost-bar"></div>
        </div>

        <div style="margin-top: 40px; font-size: 0.6rem; line-height: 1.6;">
            <p class="glitch-text" id="advice">> INITIALIZING SYSTEM...</p>
            <p id="local-time">> TIME: --:--</p>
        </div>
    </div>

    <a href="index.html" class="btn-return">< BACK TO BASE</a>

    <script src="config.js"></script>
    <script>
        const apiKey = CONFIG.WEATHER_API_KEY;
        const city = "Florina,GR";
        const apiUrl = `https://api.openweathermap.org/data/2.5/weather?q=${city}&units=metric&appid=${apiKey}`;

        async function checkWeather() {
            try {
                const response = await fetch(apiUrl);
                if (!response.ok) throw new Error("Connection Error");
                
                const data = await response.json();

                // 1. Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· Î˜ÎµÏÎ¼Î¿ÎºÏÎ±ÏƒÎ¯Î±Ï‚
                const currentTemp = Math.round(data.main.temp);
                document.getElementById("temp").innerHTML = currentTemp + "Â°C";

                // 2. Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ· ÎšÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·Ï‚
                document.getElementById("condition").innerHTML = data.weather[0].main.toUpperCase();

                // 3. Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚ Frost Level (Î‘Î½ Î­Ï‡ÎµÎ¹ 10Â°C ÎµÎ¯Î½Î±Î¹ 0%, Î±Î½ Î­Ï‡ÎµÎ¹ -10Â°C ÎµÎ¯Î½Î±Î¹ 100%)
                let frostPercent = Math.max(0, Math.min(100, (10 - currentTemp) * 5));
                document.getElementById("frost-bar").style.width = frostPercent + "%";
                document.getElementById("frost-val").innerHTML = Math.round(frostPercent) + "%";

                // 4. Advice Logic
                const adviceBox = document.getElementById("advice");
                if(currentTemp <= 0) {
                    adviceBox.innerHTML = "> ALERT: EXTREME COLD. EQUIP HEAVY WOOLEN GEAR.";
                } else if(currentTemp <= 10) {
                    adviceBox.innerHTML = "> ADVICE: CHILLY VIBES. A COAT IS RECOMMENDED.";
                } else if (currentTemp <= 20) {
                    adviceBox.innerHTML = "> STATUS: MILD CONDITIONS DETECTED.";
                }
                else {
                    adviceBox.innerHTML = "> STATUS: WARM WEATHER. LIGHT CLOTHING SUFFICIENT.";
                }

                // 5. System Status & Time
                document.getElementById("system-status").innerHTML = "ONLINE";
                document.getElementById("system-status").classList.remove("blink");
                
                const now = new Date();
                document.getElementById("local-time").innerHTML = "> TIME: " + now.getHours() + ":" + now.getMinutes().toString().padStart(2, '0');

            } catch (error) {
                document.getElementById("system-status").innerHTML = "OFFLINE (ERROR)";
                document.getElementById("temp").innerHTML = "ERR";
                document.getElementById("advice").innerHTML = "> SYSTEM FAILURE: API_KEY_NOT_FOUND";
                console.error("Weather Error:", error);
            }
        }

        // Î•ÎºÏ„Î­Î»ÎµÏƒÎ·
        checkWeather();
    </script>
</body>

</html>